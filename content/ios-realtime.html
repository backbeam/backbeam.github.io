<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Realtime | Backbeam documentation</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="backbeam">
        <meta name="description" content="Welcome to the Backbeam *documentation*.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="./android-sdk.html" />
        
        
        <link rel="prev" href="./ios-push-notifications.html" />
        

        <meta property="og:title" content="Realtime | Backbeam documentation">
        <meta property="og:site_name" content="Backbeam documentation">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/backbeam">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="gitbook/style.css">
        


        
    <div class="book" data-github="backbeam/backbeam.github.io" data-level="2.6" data-basepath="." data-revision="1399650440513">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://backbeam.io/documentation" target="_blank" class="btn pull-left"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/backbeam/backbeam.github.io/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/backbeam/backbeam.github.io/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >Backbeam documentation</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        

        

        
        <li>
            <a href="https://github.com/backbeam/backbeam.github.io/edit/master/ios-realtime.md" target="blank">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="./"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="overview.html">
                
                <a href="./overview.html">
                    <i class="fa fa-check"></i> <b>1.</b> Overview
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="overview-features.html">
                            
                            <a href="./overview-features.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Features
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="overview-query-language.html">
                            
                            <a href="./overview-query-language.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Query language
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="overview-control-panel.html">
                            
                            <a href="./overview-control-panel.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Control panel
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="overview-business-logic.html">
                            
                            <a href="./overview-business-logic.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Where to write the business logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="overview-authentication.html">
                            
                            <a href="./overview-authentication.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Users authentication
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="ios-sdk.html">
                
                <a href="./ios-sdk.html">
                    <i class="fa fa-check"></i> <b>2.</b> iOS SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="ios-objects.html">
                            
                            <a href="./ios-objects.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Objects and query results
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="ios-data.html">
                            
                            <a href="./ios-data.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="ios-authentication.html">
                            
                            <a href="./ios-authentication.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="ios-server-side-logic.html">
                            
                            <a href="./ios-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="ios-push-notifications.html">
                            
                            <a href="./ios-push-notifications.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.6" data-path="ios-realtime.html">
                            
                            <a href="./ios-realtime.html">
                                <i class="fa fa-check"></i> <b>2.6.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="android-sdk.html">
                
                <a href="./android-sdk.html">
                    <i class="fa fa-check"></i> <b>3.</b> Android SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="android-data.html">
                            
                            <a href="./android-data.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="android-authentication.html">
                            
                            <a href="./android-authentication.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="android-server-side-logic.html">
                            
                            <a href="./android-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="android-push-notifications.html">
                            
                            <a href="./android-push-notifications.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.5" data-path="android-realtime.html">
                            
                            <a href="./android-realtime.html">
                                <i class="fa fa-check"></i> <b>3.5.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="javascript-sdk.html">
                
                <a href="./javascript-sdk.html">
                    <i class="fa fa-check"></i> <b>4.</b> JavaScript SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="javascript-data.html">
                            
                            <a href="./javascript-data.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="javascript-authentication.html">
                            
                            <a href="./javascript-authentication.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3" data-path="javascript-server-side-logic.html">
                            
                            <a href="./javascript-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>4.3.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.4" data-path="javascript-push-notifications.html">
                            
                            <a href="./javascript-push-notifications.html">
                                <i class="fa fa-check"></i> <b>4.4.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.5" data-path="javascript-realtime.html">
                            
                            <a href="./javascript-realtime.html">
                                <i class="fa fa-check"></i> <b>4.5.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="web-development.html">
                
                <a href="./web-development.html">
                    <i class="fa fa-check"></i> <b>5.</b> Web development
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="web-development-versioning.html">
                            
                            <a href="./web-development-versioning.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Versioning
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="web-development-controllers.html">
                            
                            <a href="./web-development-controllers.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> Controllers
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3" data-path="web-development-domains.html">
                            
                            <a href="./web-development-domains.html">
                                <i class="fa fa-check"></i> <b>5.3.</b> Subdomains and custom domain
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.4" data-path="web-development-views.html">
                            
                            <a href="./web-development-views.html">
                                <i class="fa fa-check"></i> <b>5.4.</b> Views (templates)
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.5" data-path="web-development-assets.html">
                            
                            <a href="./web-development-assets.html">
                                <i class="fa fa-check"></i> <b>5.5.</b> Assets
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="rest-api.html">
                
                <a href="./rest-api.html">
                    <i class="fa fa-check"></i> <b>6.</b> REST API
                </a>
                
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 40.625%;min-width: 37.5%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./overview.html" title="Overview" class="chapter done new-chapter" data-progress="1" style="left: 3.125%;"></a>
    
        <a href="./overview-features.html" title="Features" class="chapter done " data-progress="1.1" style="left: 6.25%;"></a>
    
        <a href="./overview-query-language.html" title="Query language" class="chapter done " data-progress="1.2" style="left: 9.375%;"></a>
    
        <a href="./overview-control-panel.html" title="Control panel" class="chapter done " data-progress="1.3" style="left: 12.5%;"></a>
    
        <a href="./overview-business-logic.html" title="Where to write the business logic" class="chapter done " data-progress="1.4" style="left: 15.625%;"></a>
    
        <a href="./overview-authentication.html" title="Users authentication" class="chapter done " data-progress="1.5" style="left: 18.75%;"></a>
    
        <a href="./ios-sdk.html" title="iOS SDK" class="chapter done new-chapter" data-progress="2" style="left: 21.875%;"></a>
    
        <a href="./ios-objects.html" title="Objects and query results" class="chapter done " data-progress="2.1" style="left: 25%;"></a>
    
        <a href="./ios-data.html" title="Manipulating data" class="chapter done " data-progress="2.2" style="left: 28.125%;"></a>
    
        <a href="./ios-authentication.html" title="Users authentication" class="chapter done " data-progress="2.3" style="left: 31.25%;"></a>
    
        <a href="./ios-server-side-logic.html" title="Server side logic" class="chapter done " data-progress="2.4" style="left: 34.375%;"></a>
    
        <a href="./ios-push-notifications.html" title="Push notifications" class="chapter done " data-progress="2.5" style="left: 37.5%;"></a>
    
        <a href="./ios-realtime.html" title="Realtime" class="chapter done " data-progress="2.6" style="left: 40.625%;"></a>
    
        <a href="./android-sdk.html" title="Android SDK" class="chapter  new-chapter" data-progress="3" style="left: 43.75%;"></a>
    
        <a href="./android-data.html" title="Manipulating data" class="chapter  " data-progress="3.1" style="left: 46.875%;"></a>
    
        <a href="./android-authentication.html" title="Users authentication" class="chapter  " data-progress="3.2" style="left: 50%;"></a>
    
        <a href="./android-server-side-logic.html" title="Server side logic" class="chapter  " data-progress="3.3" style="left: 53.125%;"></a>
    
        <a href="./android-push-notifications.html" title="Push notifications" class="chapter  " data-progress="3.4" style="left: 56.25%;"></a>
    
        <a href="./android-realtime.html" title="Realtime" class="chapter  " data-progress="3.5" style="left: 59.375%;"></a>
    
        <a href="./javascript-sdk.html" title="JavaScript SDK" class="chapter  new-chapter" data-progress="4" style="left: 62.5%;"></a>
    
        <a href="./javascript-data.html" title="Manipulating data" class="chapter  " data-progress="4.1" style="left: 65.625%;"></a>
    
        <a href="./javascript-authentication.html" title="Users authentication" class="chapter  " data-progress="4.2" style="left: 68.75%;"></a>
    
        <a href="./javascript-server-side-logic.html" title="Server side logic" class="chapter  " data-progress="4.3" style="left: 71.875%;"></a>
    
        <a href="./javascript-push-notifications.html" title="Push notifications" class="chapter  " data-progress="4.4" style="left: 75%;"></a>
    
        <a href="./javascript-realtime.html" title="Realtime" class="chapter  " data-progress="4.5" style="left: 78.125%;"></a>
    
        <a href="./web-development.html" title="Web development" class="chapter  new-chapter" data-progress="5" style="left: 81.25%;"></a>
    
        <a href="./web-development-versioning.html" title="Versioning" class="chapter  " data-progress="5.1" style="left: 84.375%;"></a>
    
        <a href="./web-development-controllers.html" title="Controllers" class="chapter  " data-progress="5.2" style="left: 87.5%;"></a>
    
        <a href="./web-development-domains.html" title="Subdomains and custom domain" class="chapter  " data-progress="5.3" style="left: 90.625%;"></a>
    
        <a href="./web-development-views.html" title="Views (templates)" class="chapter  " data-progress="5.4" style="left: 93.75%;"></a>
    
        <a href="./web-development-assets.html" title="Assets" class="chapter  " data-progress="5.5" style="left: 96.875%;"></a>
    
        <a href="./rest-api.html" title="REST API" class="chapter  new-chapter" data-progress="6" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_12">
                    
                        <h1 id="realtime">Realtime</h1>
<p>This section explains how to user the realtime functionality from your iOS code. It only requires the basic configuration settings in your AppDelegate (set your project and environment correctly).</p>
<h2 id="enabling-the-realtime">Enabling the realtime</h2>
<p>If you want to use the real-time API first of all you nead to enable it just calling this method</p>
<pre><code class="lang-objectivec">[Backbeam enableRealTime];
</code></pre>
<p>This keeps a connection between the application and the server. At any moment you can also disable the real-time connection calling:</p>
<pre><code class="lang-objectivec">[Backbeam disableRealTime];
</code></pre>
<p>Subscribing to real time events
You can listen to events generated by other devices (or the server). In order to support subscribing only to certain events all real-time events have a name. Events have also a collection of key-value pairs with more information about that event. This is a sample code that listens to events named chat-room and prints the value of their text parameter.</p>
<pre><code class="lang-objectivec">- (<span class="hljs-keyword">void</span>)viewDidLoad
{
    [<span class="hljs-keyword">super</span> viewDidLoad];

    [Backbeam subscribeToRealTimeEvents:@<span class="hljs-string">"chat-room"</span> delegate:<span class="hljs-keyword">self</span>];
    [Backbeam enableRealTime];
}

- (<span class="hljs-keyword">void</span>)realTimeEventReceived:(<span class="hljs-built_in">NSString</span>*)event message:(<span class="hljs-built_in">NSDictionary</span>*)message {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"received event %@ %@"</span>, event, message);
}
</code></pre>
<p>If you are no longer interested in some kind of events you should unsubscribe from those events. It is a good practique to do so because this way the SDK stops having a reference to the listener. Otherwise you could start leaking memory. And it also helps to reduce the bandwidth usage because the device will no longer receive those type of events.</p>
<pre><code class="lang-objectivec">[Backbeam unsubscribeFromRealTimeEvents:@<span class="hljs-string">"chat-room"</span> delegate:<span class="hljs-keyword">self</span>];
</code></pre>
<p>If the realtime connection is broken and it reconnects the SDK will re-subscribe automatically to the previously subscribed events so you don&#39;t have to re-subscribe programatically.</p>
<h2 id="sending-real-time-events">Sending real time events</h2>
<p>Sending events is also very easy. Just indicate the event name and the data you want to send to the devices subscribed.</p>
<pre><code class="lang-objectivec">[Backbeam sendRealTimeEvent:@<span class="hljs-string">"chat-room"</span> message:@{@<span class="hljs-string">"text"</span>:@<span class="hljs-string">"some text"</span>}];
</code></pre>
<h2 id="listening-to-real-time-connection-changes">Listening to real time connection changes</h2>
<p>You may need to indicate the user whether the realtime connection is available or not. For example you could present the user an activity indicator while the connection is being established.</p>
<pre><code class="lang-objectivec">- (<span class="hljs-keyword">void</span>)viewDidLoad {
    [<span class="hljs-keyword">super</span> viewDidLoad];
    [Backbeam subscribeToRealTimeConnectionEvents:<span class="hljs-keyword">self</span>];
}

- (<span class="hljs-keyword">void</span>)realTimeConnected {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"connected!"</span>);
}

- (<span class="hljs-keyword">void</span>)realTimeConnecting {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"connecting..."</span>);
}

- (<span class="hljs-keyword">void</span>)realTimeDisconnected {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"disconnected!"</span>);
}

- (<span class="hljs-keyword">void</span>)realTimeConnectionFailed:(<span class="hljs-built_in">NSError</span>*)error {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"connection failed %@"</span>, error);
}
</code></pre>
<h2 id="other-realtime-methods">Other realtime methods</h2>
<p>The Backbeam class has other interesting methods realted to the realtime functionality:</p>
<ul>
<li><code>subscribedRealTimeEvents</code> returns an array of NSString objects indicating all the event names that have at least one subscriber</li>
<li><code>unsubscribeAllRealTimeEventDelegates</code> unsubscribes all delegates from the realtime events</li>
<li><code>unsubscribeAllRealTimeConnectionDelegates</code> unsubscribes all delegates from realtime connection events</li>
<li><code>isRealTimeEnabled</code> returns YES if the realtime API is enabled</li>
<li><code>isRealTimeConnected</code> returns YES if the realtime socket is connected</li>
</ul>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./ios-push-notifications.html" class="navigation navigation-prev "><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./android-sdk.html" class="navigation navigation-next "><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="gitbook/app.js"></script>
        

    
    <script src="gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"sepia","family":"serif","size":1},"disqus":{"shortName":"backbeamdocs"}};
    gitbook.start(config);
});
</script>

    </body>
</html>
