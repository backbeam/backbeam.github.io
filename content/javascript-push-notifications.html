<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Push notifications | Backbeam.io documentation</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="backbeam">
        <meta name="description" content="Welcome to the Backbeam documentation. This documentation describes the [Backbeam.io service](https://backbeam.io) and its SDKs.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="./javascript-realtime.html" />
        
        
        <link rel="prev" href="./javascript-server-side-logic.html" />
        

        <meta property="og:title" content="Push notifications | Backbeam.io documentation">
        <meta property="og:site_name" content="Backbeam.io documentation">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/backbeam">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="gitbook/style.css">
        


        
    <div class="book" data-github="backbeam/backbeam.github.io" data-level="4.4" data-basepath="." data-revision="1400118303354">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://backbeam.io/documentation" target="_blank" class="btn pull-left"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/backbeam/backbeam.github.io/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/backbeam/backbeam.github.io/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >Backbeam.io documentation</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        

        

        
        <li>
            <a href="https://github.com/backbeam/backbeam.github.io/edit/master/javascript-push-notifications.md" target="blank">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="./"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="overview.html">
                
                <a href="./overview.html">
                    <i class="fa fa-check"></i> <b>1.</b> Features
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="overview-query-language.html">
                            
                            <a href="./overview-query-language.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Query language
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="overview-business-logic.html">
                            
                            <a href="./overview-business-logic.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Where to write the business logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="overview-authentication.html">
                            
                            <a href="./overview-authentication.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="overview-push-notifications.html">
                            
                            <a href="./overview-push-notifications.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="overview-email-delivery.html">
                            
                            <a href="./overview-email-delivery.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Email templates and delivery
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.6" data-path="overview-realtime.html">
                            
                            <a href="./overview-realtime.html">
                                <i class="fa fa-check"></i> <b>1.6.</b> Realtime
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.7" data-path="overview-templating-engine.html">
                            
                            <a href="./overview-templating-engine.html">
                                <i class="fa fa-check"></i> <b>1.7.</b> Templating engine
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="ios-sdk.html">
                
                <a href="./ios-sdk.html">
                    <i class="fa fa-check"></i> <b>2.</b> iOS SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="ios-objects.html">
                            
                            <a href="./ios-objects.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Objects and query results
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="ios-data.html">
                            
                            <a href="./ios-data.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="ios-authentication.html">
                            
                            <a href="./ios-authentication.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="ios-server-side-logic.html">
                            
                            <a href="./ios-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="ios-push-notifications.html">
                            
                            <a href="./ios-push-notifications.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.6" data-path="ios-realtime.html">
                            
                            <a href="./ios-realtime.html">
                                <i class="fa fa-check"></i> <b>2.6.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="android-sdk.html">
                
                <a href="./android-sdk.html">
                    <i class="fa fa-check"></i> <b>3.</b> Android SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="android-objects.html">
                            
                            <a href="./android-objects.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Objects and query results
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="android-data.html">
                            
                            <a href="./android-data.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="android-authentication.html">
                            
                            <a href="./android-authentication.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="android-server-side-logic.html">
                            
                            <a href="./android-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.5" data-path="android-push-notifications.html">
                            
                            <a href="./android-push-notifications.html">
                                <i class="fa fa-check"></i> <b>3.5.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.6" data-path="android-realtime.html">
                            
                            <a href="./android-realtime.html">
                                <i class="fa fa-check"></i> <b>3.6.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="javascript-sdk.html">
                
                <a href="./javascript-sdk.html">
                    <i class="fa fa-check"></i> <b>4.</b> JavaScript SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="javascript-data.html">
                            
                            <a href="./javascript-data.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="javascript-authentication.html">
                            
                            <a href="./javascript-authentication.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3" data-path="javascript-server-side-logic.html">
                            
                            <a href="./javascript-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>4.3.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.4" data-path="javascript-push-notifications.html">
                            
                            <a href="./javascript-push-notifications.html">
                                <i class="fa fa-check"></i> <b>4.4.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.5" data-path="javascript-realtime.html">
                            
                            <a href="./javascript-realtime.html">
                                <i class="fa fa-check"></i> <b>4.5.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="web-development.html">
                
                <a href="./web-development.html">
                    <i class="fa fa-check"></i> <b>5.</b> Web development
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="web-development-versioning.html">
                            
                            <a href="./web-development-versioning.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Versioning
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="web-development-controllers.html">
                            
                            <a href="./web-development-controllers.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> Controllers
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3" data-path="web-development-domains.html">
                            
                            <a href="./web-development-domains.html">
                                <i class="fa fa-check"></i> <b>5.3.</b> Subdomains and custom domain
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.4" data-path="web-development-views.html">
                            
                            <a href="./web-development-views.html">
                                <i class="fa fa-check"></i> <b>5.4.</b> Views (templates)
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.5" data-path="web-development-assets.html">
                            
                            <a href="./web-development-assets.html">
                                <i class="fa fa-check"></i> <b>5.5.</b> Assets
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="rest-api.html">
                
                <a href="./rest-api.html">
                    <i class="fa fa-check"></i> <b>6.</b> REST API
                </a>
                
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 77.14285714285714%;min-width: 74.28571428571429%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./overview.html" title="Features" class="chapter done new-chapter" data-progress="1" style="left: 2.857142857142857%;"></a>
    
        <a href="./overview-query-language.html" title="Query language" class="chapter done " data-progress="1.1" style="left: 5.714285714285714%;"></a>
    
        <a href="./overview-business-logic.html" title="Where to write the business logic" class="chapter done " data-progress="1.2" style="left: 8.571428571428571%;"></a>
    
        <a href="./overview-authentication.html" title="Users authentication" class="chapter done " data-progress="1.3" style="left: 11.428571428571429%;"></a>
    
        <a href="./overview-push-notifications.html" title="Push notifications" class="chapter done " data-progress="1.4" style="left: 14.285714285714286%;"></a>
    
        <a href="./overview-email-delivery.html" title="Email templates and delivery" class="chapter done " data-progress="1.5" style="left: 17.142857142857142%;"></a>
    
        <a href="./overview-realtime.html" title="Realtime" class="chapter done " data-progress="1.6" style="left: 20%;"></a>
    
        <a href="./overview-templating-engine.html" title="Templating engine" class="chapter done " data-progress="1.7" style="left: 22.857142857142858%;"></a>
    
        <a href="./ios-sdk.html" title="iOS SDK" class="chapter done new-chapter" data-progress="2" style="left: 25.714285714285715%;"></a>
    
        <a href="./ios-objects.html" title="Objects and query results" class="chapter done " data-progress="2.1" style="left: 28.571428571428573%;"></a>
    
        <a href="./ios-data.html" title="Manipulating data" class="chapter done " data-progress="2.2" style="left: 31.428571428571427%;"></a>
    
        <a href="./ios-authentication.html" title="Users authentication" class="chapter done " data-progress="2.3" style="left: 34.285714285714285%;"></a>
    
        <a href="./ios-server-side-logic.html" title="Server side logic" class="chapter done " data-progress="2.4" style="left: 37.142857142857146%;"></a>
    
        <a href="./ios-push-notifications.html" title="Push notifications" class="chapter done " data-progress="2.5" style="left: 40%;"></a>
    
        <a href="./ios-realtime.html" title="Realtime" class="chapter done " data-progress="2.6" style="left: 42.857142857142854%;"></a>
    
        <a href="./android-sdk.html" title="Android SDK" class="chapter done new-chapter" data-progress="3" style="left: 45.714285714285715%;"></a>
    
        <a href="./android-objects.html" title="Objects and query results" class="chapter done " data-progress="3.1" style="left: 48.57142857142857%;"></a>
    
        <a href="./android-data.html" title="Manipulating data" class="chapter done " data-progress="3.2" style="left: 51.42857142857143%;"></a>
    
        <a href="./android-authentication.html" title="Users authentication" class="chapter done " data-progress="3.3" style="left: 54.285714285714285%;"></a>
    
        <a href="./android-server-side-logic.html" title="Server side logic" class="chapter done " data-progress="3.4" style="left: 57.142857142857146%;"></a>
    
        <a href="./android-push-notifications.html" title="Push notifications" class="chapter done " data-progress="3.5" style="left: 60%;"></a>
    
        <a href="./android-realtime.html" title="Realtime" class="chapter done " data-progress="3.6" style="left: 62.857142857142854%;"></a>
    
        <a href="./javascript-sdk.html" title="JavaScript SDK" class="chapter done new-chapter" data-progress="4" style="left: 65.71428571428571%;"></a>
    
        <a href="./javascript-data.html" title="Manipulating data" class="chapter done " data-progress="4.1" style="left: 68.57142857142857%;"></a>
    
        <a href="./javascript-authentication.html" title="Users authentication" class="chapter done " data-progress="4.2" style="left: 71.42857142857143%;"></a>
    
        <a href="./javascript-server-side-logic.html" title="Server side logic" class="chapter done " data-progress="4.3" style="left: 74.28571428571429%;"></a>
    
        <a href="./javascript-push-notifications.html" title="Push notifications" class="chapter done " data-progress="4.4" style="left: 77.14285714285714%;"></a>
    
        <a href="./javascript-realtime.html" title="Realtime" class="chapter  " data-progress="4.5" style="left: 80%;"></a>
    
        <a href="./web-development.html" title="Web development" class="chapter  new-chapter" data-progress="5" style="left: 82.85714285714286%;"></a>
    
        <a href="./web-development-versioning.html" title="Versioning" class="chapter  " data-progress="5.1" style="left: 85.71428571428571%;"></a>
    
        <a href="./web-development-controllers.html" title="Controllers" class="chapter  " data-progress="5.2" style="left: 88.57142857142857%;"></a>
    
        <a href="./web-development-domains.html" title="Subdomains and custom domain" class="chapter  " data-progress="5.3" style="left: 91.42857142857143%;"></a>
    
        <a href="./web-development-views.html" title="Views (templates)" class="chapter  " data-progress="5.4" style="left: 94.28571428571429%;"></a>
    
        <a href="./web-development-assets.html" title="Assets" class="chapter  " data-progress="5.5" style="left: 97.14285714285714%;"></a>
    
        <a href="./rest-api.html" title="REST API" class="chapter  new-chapter" data-progress="6" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_18">
                    
                        <h1 id="push-notifications">Push notifications</h1>
<p>In Backbeam you don&#39;t send push notifications directly to certain devices. Instead, you subscribe devices to channels and then you send notifications to those channels. Backbeam takes care about what devices are in which channels.</p>
<p>To subscribe a device to a channel you need to know its device token and the gateway. At this moment two gateways are supported: apn (Apple Push Notifications for iOS devices) and gcm (Google Cloud Messaging for Android devices).</p>
<p>For iOS devices the device token is a string with the base64 representation of the <code>NSData</code> object you receive in the <code>application:didRegisterForRemoteNotificationsWithDeviceToken:</code> method in the <code>AppDelegate</code>. For Android devices the device token is the <code>registration_id</code> returned in the intent of type <code>com.google.android.c2dm.intent.REGISTRATION</code>.</p>
<h2 id="subscribing-and-unsubscribing-devices">Subscribing and unsubscribing devices</h2>
<p>Once you know the device token you can subscribe that device to one or more channels easily.</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> device = <span class="hljs-string">'abcdefabcdefabcdefabcdefabcdef'</span>
backbeam.subscribeDeviceToChannels(<span class="hljs-string">'gcm'</span>, device, <span class="hljs-string">'channel1'</span>, <span class="hljs-string">'channel2'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
  <span class="hljs-comment">// the device is now subscribed if no error ocurred</span>
})
</code></pre>
<p>Unsubscribing a device from one or more channels is very similar:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> device = <span class="hljs-string">'abcdefabcdefabcdefabcdefabcdef'</span>
backbeam.unsubscribeDeviceFromChannels(<span class="hljs-string">'gcm'</span>, device, <span class="hljs-string">'channel1'</span>, <span class="hljs-string">'channel2'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
  <span class="hljs-comment">// the device is now unsubscribed from those channels if no error ocurred</span>
})
</code></pre>
<p>You can also unsubscribe a device from all the channels</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> device = <span class="hljs-string">'abcdefabcdefabcdefabcdefabcdef'</span>
backbeam.unsubscribeDeviceFromAllChannels(<span class="hljs-string">'gcm'</span>, device, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
  <span class="hljs-comment">// the device is now unsubscribed from all channels if no error ocurred</span>
})
</code></pre>
<p>And finally you can query the channels that a device is subscribed to:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> device = <span class="hljs-string">'abcdefabcdefabcdefabcdefabcdef'</span>
backbeam.subscribedChannels(<span class="hljs-string">'gcm'</span>, device, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err, channels)</span> {</span>
  <span class="hljs-comment">// if no error ocurred you will get all the channels in the `channels` array</span>
})
</code></pre>
<h2 id="sending-push-notifications">Sending push notifications</h2>
<p>At any moment you can send push notifications to a channel</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> options = {
  apn_alert: <span class="hljs-string">'Hello from node.js'</span>,
  apn_badge: <span class="hljs-number">10</span>,
  apn_payload_custom_key: <span class="hljs-string">'custom value'</span>
}
backbeam.sendPushNotification(<span class="hljs-string">'channel1'</span>, options, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(err)</span> {</span>
  <span class="hljs-comment">// notification sent to every device subscribed to that channel</span>
})
</code></pre>
<p>The options object can have the following parameters:</p>
<ul>
<li><code>apn_alert</code>
The text to be shown in the iOS push notifications</li>
<li><code>apn_badge</code>
An optional number that will be added to the app icon for iOS devices</li>
<li><code>apn_sound</code>
An optional name of a sound file to be played when a notification arrives to a iOS device</li>
<li><code>apn_payload_*</code>
You can include additional information adding keys with this prefix for iOS devices.</li>
<li><code>gcm_collapse_key</code>
It is an arbitrary string that is used to collapse a group of like messages when the device is offline</li>
<li><code>gcm_delay_while_idle</code>
A boolean used to request messages not be delivered until the device becomes active</li>
<li><code>gcm_data_*</code>
You can include additional information adding keys with this prefix for Android devices.</li>
</ul>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./javascript-server-side-logic.html" class="navigation navigation-prev "><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./javascript-realtime.html" class="navigation navigation-next "><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="gitbook/app.js"></script>
        

    
    <script src="gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"sepia","family":"serif","size":1},"disqus":{"shortName":"backbeamdocs"}};
    gitbook.start(config);
});
</script>

    </body>
</html>
