<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    <head prefix="og: http://ogp.me/ns# book: http://ogp.me/ns/book#">
        
        <meta charset="UTF-8">
        <title>Users authentication | Backbeam documentation</title>

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="robots" content="index, follow">
        <meta name="author" content="backbeam">
        <meta name="description" content="Welcome to the Backbeam *documentation*.">
        <meta name="keywords" content="gitbook,github" >
        <meta name="generator" content="www.gitbook.io">

        
        <link rel="next" href="./ios-server-side-logic.html" />
        
        
        <link rel="prev" href="./ios-data.html" />
        

        <meta property="og:title" content="Users authentication | Backbeam documentation">
        <meta property="og:site_name" content="Backbeam documentation">
        <meta property="og:type" content="book">
        <meta property="og:locale" content="en_US">

        <meta property="book:author" content="https://github.com/backbeam">
        <meta property="book:tag" content="GitBook">

        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">

        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    </head>
    <body>
        

        <link rel="stylesheet" href="gitbook/style.css">
        


        
    <div class="book" data-github="backbeam/backbeam.github.io" data-level="2.3" data-basepath="." data-revision="1399650440513">
    <div class="book-header">
    <!-- Actions Left -->
    
    <a href="https://backbeam.io/documentation" target="_blank" class="btn pull-left"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-summary"><i class="fa fa-align-justify"></i></a>
    <a href="#" class="btn pull-left toggle-search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
	<div class="dropdown-caret">
  <span class="caret-outer"></span>
  <span class="caret-inner"></span>
</div>

	<div class="btn-group btn-block">
		<button id="reduce-font-size" class="btn btn-default">A</button>
		<button id="enlarge-font-size" class="btn btn-default">A</button>
	</div>

	<ul class="list-group font-family-list">
		<li class="list-group-item" data-font="0">Serif</li>
		<li class="list-group-item" data-font="1">Sans</li>
	</ul>

	<div class="btn-group btn-group-xs btn-block color-theme-list">
	  <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
	  <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
	</div>
</div>

    </span>

    <!-- Actions Right -->
    
    
    
    <a href="#" target="_blank" class="btn pull-right" data-sharing="twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/backbeam/backbeam.github.io/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/backbeam/backbeam.github.io/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >Backbeam documentation</a>
    </h1>
</div>

    <div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        

        

        
        <li>
            <a href="https://github.com/backbeam/backbeam.github.io/edit/master/ios-authentication.md" target="blank">Edit and Contribute</a>
        </li>
        

        
        <li class="divider"></li>
        

        <li data-level="0" data-path="index.html">
            <a href="./"><i class="fa fa-check"></i> Introduction</a>
        </li>
        
            <li  data-level="1" data-path="overview.html">
                
                <a href="./overview.html">
                    <i class="fa fa-check"></i> <b>1.</b> Overview
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="1.1" data-path="overview-features.html">
                            
                            <a href="./overview-features.html">
                                <i class="fa fa-check"></i> <b>1.1.</b> Features
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.2" data-path="overview-query-language.html">
                            
                            <a href="./overview-query-language.html">
                                <i class="fa fa-check"></i> <b>1.2.</b> Query language
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.3" data-path="overview-control-panel.html">
                            
                            <a href="./overview-control-panel.html">
                                <i class="fa fa-check"></i> <b>1.3.</b> Control panel
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.4" data-path="overview-business-logic.html">
                            
                            <a href="./overview-business-logic.html">
                                <i class="fa fa-check"></i> <b>1.4.</b> Where to write the business logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="1.5" data-path="overview-authentication.html">
                            
                            <a href="./overview-authentication.html">
                                <i class="fa fa-check"></i> <b>1.5.</b> Users authentication
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="2" data-path="ios-sdk.html">
                
                <a href="./ios-sdk.html">
                    <i class="fa fa-check"></i> <b>2.</b> iOS SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="2.1" data-path="ios-objects.html">
                            
                            <a href="./ios-objects.html">
                                <i class="fa fa-check"></i> <b>2.1.</b> Objects and query results
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.2" data-path="ios-data.html">
                            
                            <a href="./ios-data.html">
                                <i class="fa fa-check"></i> <b>2.2.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.3" data-path="ios-authentication.html">
                            
                            <a href="./ios-authentication.html">
                                <i class="fa fa-check"></i> <b>2.3.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.4" data-path="ios-server-side-logic.html">
                            
                            <a href="./ios-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>2.4.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.5" data-path="ios-push-notifications.html">
                            
                            <a href="./ios-push-notifications.html">
                                <i class="fa fa-check"></i> <b>2.5.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="2.6" data-path="ios-realtime.html">
                            
                            <a href="./ios-realtime.html">
                                <i class="fa fa-check"></i> <b>2.6.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="3" data-path="android-sdk.html">
                
                <a href="./android-sdk.html">
                    <i class="fa fa-check"></i> <b>3.</b> Android SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="3.1" data-path="android-data.html">
                            
                            <a href="./android-data.html">
                                <i class="fa fa-check"></i> <b>3.1.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.2" data-path="android-authentication.html">
                            
                            <a href="./android-authentication.html">
                                <i class="fa fa-check"></i> <b>3.2.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.3" data-path="android-server-side-logic.html">
                            
                            <a href="./android-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>3.3.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.4" data-path="android-push-notifications.html">
                            
                            <a href="./android-push-notifications.html">
                                <i class="fa fa-check"></i> <b>3.4.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="3.5" data-path="android-realtime.html">
                            
                            <a href="./android-realtime.html">
                                <i class="fa fa-check"></i> <b>3.5.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="4" data-path="javascript-sdk.html">
                
                <a href="./javascript-sdk.html">
                    <i class="fa fa-check"></i> <b>4.</b> JavaScript SDK
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="4.1" data-path="javascript-data.html">
                            
                            <a href="./javascript-data.html">
                                <i class="fa fa-check"></i> <b>4.1.</b> Manipulating data
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.2" data-path="javascript-authentication.html">
                            
                            <a href="./javascript-authentication.html">
                                <i class="fa fa-check"></i> <b>4.2.</b> Users authentication
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.3" data-path="javascript-server-side-logic.html">
                            
                            <a href="./javascript-server-side-logic.html">
                                <i class="fa fa-check"></i> <b>4.3.</b> Server side logic
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.4" data-path="javascript-push-notifications.html">
                            
                            <a href="./javascript-push-notifications.html">
                                <i class="fa fa-check"></i> <b>4.4.</b> Push notifications
                            </a>
                            
                        </li>
                    
                        <li  data-level="4.5" data-path="javascript-realtime.html">
                            
                            <a href="./javascript-realtime.html">
                                <i class="fa fa-check"></i> <b>4.5.</b> Realtime
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="5" data-path="web-development.html">
                
                <a href="./web-development.html">
                    <i class="fa fa-check"></i> <b>5.</b> Web development
                </a>
                
                
                <ul class="articles">
                    
                        <li  data-level="5.1" data-path="web-development-versioning.html">
                            
                            <a href="./web-development-versioning.html">
                                <i class="fa fa-check"></i> <b>5.1.</b> Versioning
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.2" data-path="web-development-controllers.html">
                            
                            <a href="./web-development-controllers.html">
                                <i class="fa fa-check"></i> <b>5.2.</b> Controllers
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.3" data-path="web-development-domains.html">
                            
                            <a href="./web-development-domains.html">
                                <i class="fa fa-check"></i> <b>5.3.</b> Subdomains and custom domain
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.4" data-path="web-development-views.html">
                            
                            <a href="./web-development-views.html">
                                <i class="fa fa-check"></i> <b>5.4.</b> Views (templates)
                            </a>
                            
                        </li>
                    
                        <li  data-level="5.5" data-path="web-development-assets.html">
                            
                            <a href="./web-development-assets.html">
                                <i class="fa fa-check"></i> <b>5.5.</b> Assets
                            </a>
                            
                        </li>
                    
                </ul>
                
            </li>
        
            <li  data-level="6" data-path="rest-api.html">
                
                <a href="./rest-api.html">
                    <i class="fa fa-check"></i> <b>6.</b> REST API
                </a>
                
                
            </li>
        

        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 31.25%;min-width: 28.125%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./overview.html" title="Overview" class="chapter done new-chapter" data-progress="1" style="left: 3.125%;"></a>
    
        <a href="./overview-features.html" title="Features" class="chapter done " data-progress="1.1" style="left: 6.25%;"></a>
    
        <a href="./overview-query-language.html" title="Query language" class="chapter done " data-progress="1.2" style="left: 9.375%;"></a>
    
        <a href="./overview-control-panel.html" title="Control panel" class="chapter done " data-progress="1.3" style="left: 12.5%;"></a>
    
        <a href="./overview-business-logic.html" title="Where to write the business logic" class="chapter done " data-progress="1.4" style="left: 15.625%;"></a>
    
        <a href="./overview-authentication.html" title="Users authentication" class="chapter done " data-progress="1.5" style="left: 18.75%;"></a>
    
        <a href="./ios-sdk.html" title="iOS SDK" class="chapter done new-chapter" data-progress="2" style="left: 21.875%;"></a>
    
        <a href="./ios-objects.html" title="Objects and query results" class="chapter done " data-progress="2.1" style="left: 25%;"></a>
    
        <a href="./ios-data.html" title="Manipulating data" class="chapter done " data-progress="2.2" style="left: 28.125%;"></a>
    
        <a href="./ios-authentication.html" title="Users authentication" class="chapter done " data-progress="2.3" style="left: 31.25%;"></a>
    
        <a href="./ios-server-side-logic.html" title="Server side logic" class="chapter  " data-progress="2.4" style="left: 34.375%;"></a>
    
        <a href="./ios-push-notifications.html" title="Push notifications" class="chapter  " data-progress="2.5" style="left: 37.5%;"></a>
    
        <a href="./ios-realtime.html" title="Realtime" class="chapter  " data-progress="2.6" style="left: 40.625%;"></a>
    
        <a href="./android-sdk.html" title="Android SDK" class="chapter  new-chapter" data-progress="3" style="left: 43.75%;"></a>
    
        <a href="./android-data.html" title="Manipulating data" class="chapter  " data-progress="3.1" style="left: 46.875%;"></a>
    
        <a href="./android-authentication.html" title="Users authentication" class="chapter  " data-progress="3.2" style="left: 50%;"></a>
    
        <a href="./android-server-side-logic.html" title="Server side logic" class="chapter  " data-progress="3.3" style="left: 53.125%;"></a>
    
        <a href="./android-push-notifications.html" title="Push notifications" class="chapter  " data-progress="3.4" style="left: 56.25%;"></a>
    
        <a href="./android-realtime.html" title="Realtime" class="chapter  " data-progress="3.5" style="left: 59.375%;"></a>
    
        <a href="./javascript-sdk.html" title="JavaScript SDK" class="chapter  new-chapter" data-progress="4" style="left: 62.5%;"></a>
    
        <a href="./javascript-data.html" title="Manipulating data" class="chapter  " data-progress="4.1" style="left: 65.625%;"></a>
    
        <a href="./javascript-authentication.html" title="Users authentication" class="chapter  " data-progress="4.2" style="left: 68.75%;"></a>
    
        <a href="./javascript-server-side-logic.html" title="Server side logic" class="chapter  " data-progress="4.3" style="left: 71.875%;"></a>
    
        <a href="./javascript-push-notifications.html" title="Push notifications" class="chapter  " data-progress="4.4" style="left: 75%;"></a>
    
        <a href="./javascript-realtime.html" title="Realtime" class="chapter  " data-progress="4.5" style="left: 78.125%;"></a>
    
        <a href="./web-development.html" title="Web development" class="chapter  new-chapter" data-progress="5" style="left: 81.25%;"></a>
    
        <a href="./web-development-versioning.html" title="Versioning" class="chapter  " data-progress="5.1" style="left: 84.375%;"></a>
    
        <a href="./web-development-controllers.html" title="Controllers" class="chapter  " data-progress="5.2" style="left: 87.5%;"></a>
    
        <a href="./web-development-domains.html" title="Subdomains and custom domain" class="chapter  " data-progress="5.3" style="left: 90.625%;"></a>
    
        <a href="./web-development-views.html" title="Views (templates)" class="chapter  " data-progress="5.4" style="left: 93.75%;"></a>
    
        <a href="./web-development-assets.html" title="Assets" class="chapter  " data-progress="5.5" style="left: 96.875%;"></a>
    
        <a href="./rest-api.html" title="REST API" class="chapter  new-chapter" data-progress="6" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_8">
                    
                        <h1 id="users-authentication">Users authentication</h1>
<p>This documentation is about authenticating users from your iOS code. This means you are using client-side logic and this requires you to create a pair of API keys and configure them in your <code>AppDelegate</code>. If you use server-side logic you should authenticate the user in the server-side, and the SDK will know when a signup/login/logout has happened. See the <a href="ios-server-side-logic.html">Server-side logic section</a> for further information.</p>
<h2 id="email-password-based-authentication">Email + password based authentication</h2>
<p>To register a user using email + password authentication just create an object indicating user as the object&#39;s entity, set the email and password and save the object.</p>
<pre><code class="lang-objectivec">BBObject* object = ...; <span class="hljs-comment">// some object already created</span>
[object setString:@<span class="hljs-string">"someone@example.com"</span> forField:@<span class="hljs-string">"email"</span>];
[object setString:@<span class="hljs-string">"your_strong_password"</span> forField:@<span class="hljs-string">"password"</span>];
[object save:^(BBObject* obj) {
  <span class="hljs-comment">// Depending on your project settings the user is just logged in or is waiting to confirm their email address</span>
  <span class="hljs-comment">// You can check if the user is logged using [Backbeam currentUser]</span>
} failure:^(BBObject* obj, <span class="hljs-built_in">NSError</span>* error) {
  <span class="hljs-comment">// Something went wrong</span>
}];
</code></pre>
<p>If the user is already registered and wants to login you call the [Backbeam loginWithEmail:password:success:failure:] method.</p>
<pre><code class="lang-objectivec">[Backbeam loginWithEmail:@<span class="hljs-string">"user@example.com"</span> password:@<span class="hljs-string">"the-password"</span> success:^(BBObject *object) {
  <span class="hljs-comment">// user is logged</span>
} failure:^(<span class="hljs-built_in">NSError</span>* error) {
  <span class="hljs-comment">// Something went wrong</span>
}];
</code></pre>
<p>You can optionally make some joins passing an optional argument before the callback.</p>
<p>If the user does not remember the password you can let them to request a password reset with the <code>[Backbeam requestPasswordResetWithEmail:success:failure:]</code> method. This will send the user an email with a link to a special web page (containing a verification code) to set a new password. But you can edit the email template to send the user to a custom webpage or include a link with a custom URL scheme containing the verification code. In this case you need to verify this code to authenticate the user.</p>
<pre><code class="lang-objectivec">[Backbeam verifyCode:code success:^(BBObject* user) {
  <span class="hljs-comment">// code verified. You can now change the user's password, for example</span>
} failure:^(<span class="hljs-built_in">NSError</span>* error) {
  <span class="hljs-comment">// Something went wrong</span>
});
</code></pre>
<p>The method verifyCode also has an optional parameter before the callback to join some relationships of the user.</p>
<h2 id="twitter-authentication">Twitter authentication</h2>
<p>To authenticate a user using Twitter you have at least two options: usin the Social framework introduced in iOS6 or using <code>BBTwitterSignupViewController</code>. In both cases the first thing you have to do is to configure the Twitter API keys. The best place to do so is in your AppDelegate:</p>
<pre><code class="lang-objectivec"><span class="hljs-preprocessor">#import <span class="hljs-title">"Backbeam.h"</span></span>

- (<span class="hljs-built_in">BOOL</span>)application:(<span class="hljs-built_in">UIApplication</span> *)application didFinishLaunchingWithOptions:(<span class="hljs-built_in">NSDictionary</span> *)launchOptions
{
  [Backbeam setProject:@<span class="hljs-string">"your_project"</span> sharedKey:@<span class="hljs-string">"your-shared-key"</span> secretKey:@<span class="hljs-string">"your-secret-key"</span> environment:@<span class="hljs-string">"dev"</span>];
  [Backbeam setTwitterConsumerKey:@<span class="hljs-string">"..."</span> consumerSecret:@<span class="hljs-string">"..."</span>];

  <span class="hljs-comment">// set up your application interface...</span>
}
</code></pre>
<p>With the Social framework you first ask permission to the user to access their Twitter accounts. This is not enough to get the access tokens of the user, but luckily Backbeam implements the Twitter&#39;s reverse-oauth mechanism. Once you get the access tokens of a given account then you can signup the user (or send the tokens to the server).</p>
<pre><code class="lang-objectivec"><span class="hljs-comment">//  You *MUST* keep the ACAccountStore alive for as long as you need an ACAccount instance</span>
<span class="hljs-comment">//  See WWDC 2011 Session 124 for more info.</span>
<span class="hljs-keyword">self</span><span class="hljs-variable">.accountStore</span> = [[ACAccountStore alloc] init];

<span class="hljs-comment">//  We only want to receive Twitter accounts</span>
ACAccountType *twitterType = [<span class="hljs-keyword">self</span><span class="hljs-variable">.accountStore</span> accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

<span class="hljs-comment">//  Obtain the user's permission to access the store</span>
[<span class="hljs-keyword">self</span><span class="hljs-variable">.accountStore</span> requestAccessToAccountsWithType:twitterType options:<span class="hljs-literal">nil</span> completion:^(<span class="hljs-built_in">BOOL</span> granted, <span class="hljs-built_in">NSError</span> *error) {

    <span class="hljs-comment">// be sure to run this code in the main thread</span>
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        <span class="hljs-keyword">if</span> (error) {
            <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"error %@"</span>, error);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">if</span> (!granted) {
            <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"user canceled permission"</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-built_in">NSArray</span> *accounts = [<span class="hljs-keyword">self</span><span class="hljs-variable">.accountStore</span> accountsWithAccountType:twitterType];

        <span class="hljs-comment">// Give the user the option to choose an account</span>
        ACAccount *account = accounts[<span class="hljs-number">0</span>];

        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"username: %@"</span>, account<span class="hljs-variable">.username</span>);

        <span class="hljs-comment">// Calculate the account tokens using the reverse-oauth mechanism</span>
        [Backbeam twitterReverseOAuthWithAccount:account success:^(<span class="hljs-built_in">NSDictionary</span> *params) {

            <span class="hljs-comment">// The dictionary contains the access tokens as well as the `screen_name` and `user_id`</span>
            <span class="hljs-built_in">NSString</span>* oauthToken       = [params objectForKey:@<span class="hljs-string">"oauth_token"</span>];
            <span class="hljs-built_in">NSString</span>* oauthTokenSecret = [params objectForKey:@<span class="hljs-string">"oauth_token_secret"</span>];

            <span class="hljs-comment">// Finally signup the user with the given tokens</span>
            [Backbeam twitterSignupWithOAuthToken:oauthToken oauthTokenSecret:oauthTokenSecret success:^(BBObject *user, <span class="hljs-built_in">BOOL</span> isNew) {
                <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"success!!"</span>);
            } failure:^(<span class="hljs-built_in">NSError</span> *error) {
                <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"error %@"</span>, error);
            }];

        } failure:^(<span class="hljs-built_in">NSError</span> *error) {
            <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"error %@"</span>, error);
        }];
    }];
}];
</code></pre>
<p>The downside of using the Social framework is that if the user doesn&#39;t have any Twitter account configured in the Configuration Settings, then he can&#39;t be able to sign in using this method. But the SDK provides an alternative method that is based in a UIWebView and implements the OAuth authentication flow. This functionality is implemented in the class named <code>BBTwitterSignupViewController</code>. This controller is very simple. You can open it inside a UINavigationController (and configure its navigationItem) or present it modally.</p>
<pre><code class="lang-objectivec">BBTwitterSignupViewController* vc = [Backbeam twitterSignupViewController];
<span class="hljs-comment">// in this case the view-controller is pushed into a UINavigationController</span>
[<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span> pushViewController:vc animated:<span class="hljs-literal">YES</span>];
[vc signup:^(BBObject* user, <span class="hljs-built_in">NSDictionary</span>* extraInfo, <span class="hljs-built_in">BOOL</span> isNew) {
  <span class="hljs-comment">// The user is now logged.</span>
  <span class="hljs-comment">// Inside 'extraInfo' you can get the 'oauth_token' and 'oauth_token_secret'</span>
  <span class="hljs-comment">// if you need them to fetch further information of this user in Twitter</span>
  <span class="hljs-comment">// The 'isNew' flag indicates whether this user authenticated against your application</span>
  <span class="hljs-comment">// for the first time or is a returning user</span>
  [<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span> popViewControllerAnimated:<span class="hljs-literal">YES</span>];
} failure:^(<span class="hljs-built_in">NSError</span>* error) {
  <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"error %@"</span>, error);
} progress:^(BBSocialSignupProgress progress) {
  <span class="hljs-comment">// Depending on the progress state you could show a HUD to the user like SVProgressHUD https://github.com/samvermette/SVProgressHUD</span>
    <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressLoadingAuthorizationPage) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"loading..."</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressLoadedAuthorizationPage) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"loaded"</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressAuthorizating) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"authorizating..."</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressRedirecting) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"redirecting..."</span>);
    }
}];
</code></pre>
<p>The progress block is optional. There is even a version of this method without that parameter. But it is a good place to show some indicator to the user that there is something in progress.</p>
<p>The ViewController&#39;s UI is intentionally minimal. You can change the navigationItem, you could add an activity indicator, etc.</p>
<p>In order to use this mecanism you need to put some value in the callback parameter in your Twitter application. You can put anything. For example <a href="http://example.com" target="_blank">http://example.com</a>. If you don&#39;t configure this parameter the WebView won&#39;t work. See <a href="https://dev.twitter.com/discussions/1250" target="_blank">this discussion</a> that contains this message from the Twitter support:</p>
<blockquote>
<p>You need to have a placeholder URL on your app settings -- it doesn&#39;t matter what that URL is, really, but you should have one there. The presence of that URL allows you to perform callback-based authorization</p>
</blockquote>
<h2 id="facebook-authentication">Facebook authentication</h2>
<p>To support facebook authentication you first need to set up your application as explained in the official Facebook documentation. For example you must set a FacebookAppID key in your Info.plist file.</p>
<p>Then you will authenticate the user using the Facebook SDK and then you will pass the session&#39;s access_token to the Backbeam SDK. This is a quick example of how to get an access_token and pass it to the Backbeam SDK to authenticate a user.</p>
<pre><code class="lang-objectivec"><span class="hljs-built_in">NSArray</span> *permissions = [<span class="hljs-built_in">NSArray</span> arrayWithObjects:@<span class="hljs-string">"email"</span>, <span class="hljs-literal">nil</span>];
[FBSession openActiveSessionWithReadPermissions:permissions allowLoginUI:<span class="hljs-literal">YES</span> completionHandler:^(FBSession *session, FBSessionState status, <span class="hljs-built_in">NSError</span> *error) {

  <span class="hljs-built_in">NSString</span> *token = [[FBSession activeSession] accessTokenData]<span class="hljs-variable">.accessToken</span>;
  <span class="hljs-keyword">if</span> (token) {
    [Backbeam facebookSignupWithAccessToken:token success:^(BBObject* user, <span class="hljs-built_in">BOOL</span> isNew) {
      <span class="hljs-comment">// The user is authenticated in backbeam</span>
      <span class="hljs-comment">// The 'isNew' flag indicates whether this user authenticated against your application</span>
      <span class="hljs-comment">// for the first time or is a returning user</span>
    } failure:^(<span class="hljs-built_in">NSError</span>* err) {
      <span class="hljs-comment">// Something went wrong</span>
    }];
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// check the facebook session status with the `status` variable or see if there is some `error`</span>
  }
}];
</code></pre>
<p>Note that when the user wants to logout you should log them out from both the Backbeam SDK and the Facebook SDK. And you need to be aware that the Facebook SDK and the Bacbkeam SDK session information is not synchronized automatically. For example the Facebook session could expire, but Backbeam sessions do not expire. This is how you can logout the user from Backbeam and from Facebook as well:</p>
<pre><code class="lang-objectivec">[Backbeam logout];
[[FBSession activeSession] closeAndClearTokenInformation];
</code></pre>
<h2 id="google-authentication">Google+ authentication</h2>
<p>First of all you should install the Google+ SDK and configure your application as explained in the official website: Google+ Sign-In for iOS. You can stop at the Add the sign-in button section. Then you will have a code similar to this:</p>
<pre><code class="lang-objectivec">GPPSignIn *signIn = [GPPSignIn sharedInstance];
signIn<span class="hljs-variable">.clientID</span> = YOUR_GOOGLE_PLUS_CLIENT_ID;
signIn<span class="hljs-variable">.scopes</span> = @[kGTLAuthScopePlusLogin]; <span class="hljs-comment">// defined in GTLPlusConstants.h</span>
signIn<span class="hljs-variable">.delegate</span> = <span class="hljs-keyword">self</span>;

[signIn authenticate];
</code></pre>
<p>When the user completes the authorization step successfully your delegate method will be called and then you can use the accessToken to signup the user into Backbeam. Remember to have enabled in your Google APIs console the Google+ API service in the Services section.</p>
<pre><code class="lang-objectivec">- (<span class="hljs-keyword">void</span>)finishedWithAuth:(GTMOAuth2Authentication *)auth error:(<span class="hljs-built_in">NSError</span> *)error {

    [Backbeam googlePlusSignupWithAccessToken:auth<span class="hljs-variable">.accessToken</span> success:^(BBObject *user, <span class="hljs-built_in">BOOL</span> isNew) {
    <span class="hljs-comment">// The user is authenticated in backbeam</span>
    <span class="hljs-comment">// The 'isNew' flag indicates whether this user authenticated against your application</span>
    <span class="hljs-comment">// for the first time or is a returning user</span>
    } failure:^(<span class="hljs-built_in">NSError</span> *error) {
        <span class="hljs-comment">// Something went wrong</span>
    }];
}
</code></pre>
<p>If you get a redirect_uri_mismatch error probably means that you haven&#39;t set correctly the Bundle ID in the Google API console. It must match the one in your project settings in XCode. If you get a <code>[__NSDictionaryM gtm_httpArgumentsString]: unrecognized selector sent to instance</code> error in XCode4 probably you need to add the -objC flag in the Other Linker Flags setting inside Build settings in your XCode project.</p>
<p>Note that when the user wants to logout you should log them out from both the Backbeam SDK and the Google+ SDK. And you need to be aware that the Google+ SDK and the Bacbkeam SDK session information is not synchronized automatically. For example the Google+ session could expire, but Backbeam sessions do not expire. This is how you can logout the user from Backbeam and from Google+ as well:</p>
<pre><code class="lang-objectivec">[Backbeam logout];
[[GPPSignIn sharedInstance] disconnect];
</code></pre>
<h2 id="linkedin-authentication">LinkedIn authentication</h2>
<p>In order to use LinkedIn authentication you use the <code>linkedInSignupWithAccessToken:success:failure</code> method in the Backbeam class. This requires you to obtain the access token of the user by yourself. But additionally the SDK comes with a helper ViewController with a WebView to handle all the Oauth2 implementation.</p>
<p>You need to configure the project first. A good way to do so is in your AppDelegate. You need to create a LinkedIn app and pass the clientId and clientSecret to the Backbeam SDK:</p>
<pre><code class="lang-objectivec">[Backbeam setLinkedInClientId:@<span class="hljs-string">"..."</span> clientSecret:@<span class="hljs-string">"..."</span>];
Then at any time you create a ViewController that contains a <span class="hljs-built_in">UIWebView</span> that will guide the user in the authentication steps. This is an example of use.

BBLinkedInSignupViewController *vc = [Backbeam linkedInSignupViewController];
[<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span> pushViewController:vc animated:<span class="hljs-literal">YES</span>];
[vc signup:^(BBObject *user, <span class="hljs-built_in">NSDictionary</span> *extraInfo, <span class="hljs-built_in">BOOL</span> isNew) {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"success %@ extra %@"</span>, [user linkedInData:@<span class="hljs-string">"headline"</span>], extraInfo);
    [<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span> popViewControllerAnimated:<span class="hljs-literal">YES</span>];
} failure:^(<span class="hljs-built_in">NSError</span> *err) {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"error %@"</span>, err);
} progress:^(BBSocialSignupProgress progress) {
    <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressLoadingAuthorizationPage) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"loading..."</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressLoadedAuthorizationPage) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"loaded"</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressAuthorizating) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"authorizating..."</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressRedirecting) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"redirecting..."</span>);
    }
}];
</code></pre>
<p>The ViewController&#39;s UI is minimal intentionally. You can use the progress block to update the interface adding an activity indicator for example between the &quot;loading&quot; and &quot;loaded&quot; steps. You can also modify the navigationItem of the view controller to put buttons, etc. If you want to use the LinkedIn API you can access the access_token in the extraInfo dictionary returned when the signup is successful.</p>
<h2 id="github-authentication">GitHub authentication</h2>
<p>In order to use GitHub authentication you use the <code>gitHubSignupWithAccessToken:success:failure</code> method in the Backbeam class. This requires you to obtain the access token of the user by yourself. But additionally the SDK comes with a helper ViewController with a WebView to handle all the Oauth2 implementation.</p>
<p>You need to configure the project first. A good way to do so is in your <code>AppDelegate</code>. You need to register a GitHub application and pass the clientId, clientSecret and authorization callback URL to the Backbeam SDK:</p>
<pre><code class="lang-objectivec">[Backbeam setGitHubClientId:@<span class="hljs-string">"..."</span> clientSecret:@<span class="hljs-string">"..."</span> callbackURL:@<span class="hljs-string">"..."</span>];
</code></pre>
<p>Actually the callback URL won&#39;t be loaded at any moment if everything goes well, but the GitHub&#39;s OAuth implementation requires to pass the URL in the process.</p>
<p>Once you have your project configured at any time you create a ViewController that contains a <code>UIWebView</code> that will guide the user in the authentication steps. This is an example of use.</p>
<pre><code class="lang-objectivec">BBGitHubSignupViewController *vc = [Backbeam gitHubSignupViewController];
[<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span> pushViewController:vc animated:<span class="hljs-literal">YES</span>];
[vc signup:^(BBObject *user, <span class="hljs-built_in">NSDictionary</span> *extraInfo, <span class="hljs-built_in">BOOL</span> isNew) {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"success %@ extra %@"</span>, [user gitHubData:@<span class="hljs-string">"login"</span>], extraInfo);
    [<span class="hljs-keyword">self</span><span class="hljs-variable">.navigationController</span> popViewControllerAnimated:<span class="hljs-literal">YES</span>];
} failure:^(<span class="hljs-built_in">NSError</span> *err) {
    <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"error %@"</span>, err);
} progress:^(BBSocialSignupProgress progress) {
    <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressLoadingAuthorizationPage) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"loading..."</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressLoadedAuthorizationPage) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"loaded"</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressAuthorizating) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"authorizating..."</span>);
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (progress == BBSocialSignupProgressRedirecting) {
        <span class="hljs-built_in">NSLog</span>(@<span class="hljs-string">"redirecting..."</span>);
    }
}];
</code></pre>
<p>The ViewController&#39;s UI is minimal intentionally. You can use the progress block to update the interface adding an activity indicator for example between the &quot;loading&quot; and &quot;loaded&quot; steps. You can also modify the navigationItem of the view controller to put buttons, etc. If you want to use the LinkedIn API you can access the <code>access_token</code> in the <code>extraInfo</code> dictionary returned when the signup is successful.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./ios-data.html" class="navigation navigation-prev "><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./ios-server-side-logic.html" class="navigation navigation-next "><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        

        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/ace.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.1.3/mode-javascript.js"></script>
        <script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
        <script src="gitbook/app.js"></script>
        

    
    <script src="gitbook/plugins/gitbook-plugin-disqus/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mixpanel/plugin.js"></script>
    

    
    <script src="http://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"sepia","family":"serif","size":1},"disqus":{"shortName":"backbeamdocs"}};
    gitbook.start(config);
});
</script>

    </body>
</html>
